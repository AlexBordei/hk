"use strict";function ownKeys(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}jQuery(function(s){if("undefined"==typeof wc_checkout_params&&"undefined"==typeof woocommerce_params)return!1;function i(e){return e=(e=(e=e.replace(/[iIîÎâÂaAăĂâÂ]/g,"a")).replace(/[tTȚț]/g,"t")).replace(/[sSȘș]/g,"s")}var e="";"undefined"!=typeof wc_checkout_params?e=wc_checkout_params.ajax_url:"undefined"!=typeof woocommerce_params&&(e=woocommerce_params.ajax_url);var l=e;function u(e){return-1<["S1","S2","S3","S4","S5","S6"].indexOf(e)}function d(e,t){e.find("option[value='"+t+"']").length?e.val(t).trigger("change"):(t=new Option(t,t,!0,!0),e.append(t).trigger("change"))}function t(t){s.ajax({type:"POST",url:l,data:{action:"coleteonline_phone_number_check",phone_number:s("#".concat(t,"_phone")).val(),country:s("#".concat(t,"_country")).val()},success:function(e){null===(e=JSON.parse(e))||e.valid||e.error?(s("#".concat(t,"_phone_field")).removeClass("woocommerce-invalid"),s("#".concat(t,"_phone_field")).addClass("woocommerce-valid")):(s("#".concat(t,"_phone_field")).removeClass("woocommerce-valid"),s("#".concat(t,"_phone_field")).addClass("woocommerce-invalid"))}})}function a(t){var e=s("#".concat(t,"_state")).val(),n=s("#".concat(t,"_city")).val();"RO"!==s("#".concat(t,"_country")).val()?e="--":u(n)&&(n=(a=[e,n])[0],e=a[1],n="Bucuresti");var a=s("#".concat(t,"_street")).val();void 0!==a&&a.length||(a="--"),s.ajax({type:"GET",url:l,data:{action:"coleteonline_postal_code_search",country:s("#".concat(t,"_country")).val(),street:a,county:e,city:n,validate_street:2},success:function(e){1!=(e=JSON.parse(e)).error&&e.codes.length&&(s("#".concat(t,"_postcode")).val(e.codes[0].code),s("#".concat(t,"_postcode_field")).removeClass("woocommerce-invalid"),s("body").trigger("update_checkout"))}})}"undefined"!=typeof customAjaxPath&&void 0!==customAjaxPath.pluginsUrl&&(l=customAjaxPath.pluginsUrl);var c={shipping:void 0,billing:void 0},o={shipping:!1,billing:!1};function n(r,e){if(c[r]!==e){if(c[r]=e,o[r]&&(d(s("#".concat(r,"_city_state")),""),d(s("#".concat(r,"_street")),""),d(s("#".concat(r,"_locality")),""),s("#".concat(r,"_city")).val(""),s("#".concat(r,"_postcode")).val(""),s("#".concat(r,"_address_1")).val(""),s("#".concat(r,"_street_number")).val("")),"RO"===e){if(s("#".concat(r,"_address_1_field")).addClass("hidden-field"),s("#".concat(r,"_street_field")).removeClass("hidden-field"),s("#".concat(r,"_street_number_field")).removeClass("hidden-field"),coleteOnlineOptions.separateFields?(s("#".concat(r,"_city_field")).addClass("hidden-field"),s("#".concat(r,"_locality_field")).removeClass("hidden-field")):(s("#".concat(r,"_state")).val()&&s("#".concat(r,"_city")).val()||(d(s("#".concat(r,"_city_state")),""),d(s("#".concat(r,"_street")),"")),s("#".concat(r,"_state_field")).addClass("hidden-field"),s("#".concat(r,"_city_field")).addClass("hidden-field"),s("#".concat(r,"_locality_field")).addClass("hidden-field"),s("#".concat(r,"_city_state_field")).removeClass("hidden-field")),o[r])return;s("#".concat(r,"_city")).val()&&(u(t=s("#".concat(r,"_city")).val())&&(t=t.replace("S","Sectorul ")),d(s("#".concat(r,"_locality")),t));var t=s("#".concat(r,"_address_1")).val();void 0!==t&&t.length&&d(s("#".concat(r,"_street")),t)}else s("#".concat(r,"_street_number_field")).addClass("hidden-field"),s("#".concat(r,"_address_1_field")).removeClass("hidden-field"),s("#".concat(r,"_street_field")).addClass("hidden-field"),s("#".concat(r,"_street_number_field")).addClass("hidden-field"),coleteOnlineOptions.separateFields?(s("#".concat(r,"_city_field")).removeClass("hidden-field"),s("#".concat(r,"_locality_field")).addClass("hidden-field")):(s("#".concat(r,"_state_field")).removeClass("hidden-field"),s("#".concat(r,"_city_field")).removeClass("hidden-field"),s("#".concat(r,"_city_state_field")).addClass("hidden-field"));var n;o[r]||(o[r]=!0,s("#".concat(r,"_postcode")).change(function(){var t,e,n,a,c,o;"RO"===s("#".concat(r,"_country")).val()?(o=r,s.ajax({type:"GET",url:l,data:{action:"coleteonline_reverse_postal_code_search",postal_code:s("#".concat(o,"_postcode")).val(),country:s("#".concat(o,"_country")).val()},success:function(e){var t,n;!0!==(e=JSON.parse(e)).error&&(e.length||Object.keys(e).length?(s("#".concat(o,"_postcode_field")).removeClass("woocommerce-invalid"),coleteOnlineOptions.separateFields?(u(e.countyCode)?(s("#".concat(o,"_state")).val("B"),s("#".concat(o,"_state")).trigger("change"),s("#".concat(o,"_city")).val(e.countyCode),d(s("#".concat(o,"_locality")),e.locality.county)):(s("#".concat(o,"_state")).val(e.countyCode),s("#".concat(o,"_state")).trigger("change"),s("#".concat(o,"_city")).val(e.locality.city),d(s("#".concat(o,"_locality")),e.locality.city)),void 0!==e.street&&e.street.length&&(d(s("#".concat(o,"_street")),e.street[0]),s("#".concat(o,"_address_1")).val(e.street[0])),s("#".concat(o,"_locality")).removeAttr("disabled"),s("body").trigger("update_checkout")):(s("#".concat(o,"_state")).val(e.countyCode),s("#".concat(o,"_city")).val(e.locality.city),t=e.locality,n="".concat(t.city,", ").concat(t.county),void 0!==e.street&&e.street.length?(d(s("#".concat(o,"_street")),e.street[0]),s("#".concat(o,"_address_1")).val(e.street[0])):(d(s("#".concat(o,"_street")),""),s("#".concat(o,"_address_1")).val("")),t.city&&t.county&&d(s("#".concat(o,"_city_state")),"".concat(t.city,", ").concat(t.county)),s("#".concat(o,"_city_state")).trigger({type:"select2:select",params:{data:{countyCode:e.countyCode,id:n,text:n,countyName:t.county,cityName:t.city,trigger:!1}}}))):s("#".concat(o,"_postcode_field")).addClass("woocommerce-invalid"))}})):void 0!==(c=s("#".concat(t=r,"_postcode")).val())&&c.length&&(n=s("#".concat(t,"_state")).val(),e=s("#".concat(t,"_city")).val(),"RO"!==s("#".concat(t,"_country")).val()?n="--":u(e)&&(e=(a=[n,e])[0],n=a[1],e="Bucuresti"),void 0!==(a=s("#".concat(t,"_street")).val())&&a.length||(a="--"),void 0!==e&&e.length||(e="--"),s.ajax({type:"GET",url:l,data:{action:"coleteonline_validate_postal_code",country:s("#".concat(t,"_country")).val(),street:a,county:n,city:e,postal_code:c},success:function(e){if(1!=(e=JSON.parse(e)).error){if(!1===e.format||!1===e.location)return s("#".concat(t,"_postcode_field")).addClass("woocommerce-invalid"),void s("body").trigger("update_checkout");s("#".concat(t,"_postcode_field")).removeClass("woocommerce-invalid"),s("body").trigger("update_checkout")}else s("body").trigger("update_checkout")}}))}),s("#".concat(r,"_postcode")).keydown(function(e){e.stopPropagation()}),s("#".concat(r,"_street")).select2({ajax:{url:l,dataType:"json",delay:300,data:function(e){var t,n=s("#".concat(r,"_state")).val(),a=s("#".concat(r,"_city")).val();return u(a)&&(a=(t=[n,a])[0],n=t[1]),"B"===a&&(a="Bucuresti"),{action:"coleteonline_autocomplete_street",country:s("#".concat(r,"_country")).val(),county:n,city:a,q:e.term,page:null!==(e=e.page)&&void 0!==e?e:1}},processResults:function(e,t){if(null==e||!0===e.error)return{results:[],pagination:{more:!1}};var n=e.data.map(function(e){return{text:e.name,id:e.name}}),e=e.pagination;return{results:n,pagination:{more:e.currentPage<e.totalPages}}}},language:{errorLoading:function(){return coleteOnlineLanguage.streetSearch.errorLoading},inputTooLong:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.streetSearch.inputTooLong.replace("%d",e)},inputTooShort:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.streetSearch.inputTooShort.replace("%d",e)},loadingMore:function(){return coleteOnlineLanguage.streetSearch.loadingMore},noResults:function(){return coleteOnlineLanguage.streetSearch.noResults},searching:function(){return coleteOnlineLanguage.streetSearch.searching},removeAllItems:function(){return coleteOnlineLanguage.streetSearch.removeAllItems},removeItem:function(){return coleteOnlineLanguage.streetSearch.removeItem},search:function(){return coleteOnlineLanguage.streetSearch.search}},width:"100%",minimumInputLength:2,selectOnClose:"yes"===coleteOnlineOptions.autoSelectStreet,tags:!0,insertTag:function(e,t){for(var n=!1,a=i(t.text).toLowerCase(),c=0;c<e.length;++c){var o=i(e[c].text);s.trim(o).toLowerCase()===a&&(n=!0)}n||e.unshift(t)}}),s("#".concat(r,"_street")).on("select2:select",function(e){a(r),s("#".concat(r,"_address_1")).val(e.params.data.text)}),coleteOnlineOptions.separateFields?(n={ajax:{url:l,dataType:"json",delay:300,data:function(e){return"B"===s("#".concat(r,"_state")).val()&&(e.term||(e.term="S")),{action:"coleteonline_autocomplete_city",country:s("#".concat(r,"_country")).val(),county_code:s("#".concat(r,"_state")).val(),q:e.term,page:null!==(e=e.page)&&void 0!==e?e:1}},processResults:function(e,t){if(!0===e.error)return{results:[{text:t.term,id:t.term}],pagination:{more:!1}};for(var n=function(e){return{text:e.localityName,id:e.localityName,countyCode:e.countyCode,cityName:e.localityName,countyName:e.countyName}},a=function(e){return{text:e.countyName,id:e.countyName,countyCode:e.countyCode,cityName:e.countyName,countyName:e.localityName}},c=[],o=0;o<e.data.length;++o){var i=e.data[o],l=n;"B"===s("#".concat(r,"_state")).val()&&(l=a),i.list?c.push({text:i.upLocality+":",children:i.list.map(l)}):c.push(l(i))}t=e.pagination;return{results:c,pagination:{more:t.currentPage<t.totalPages}}}},language:{errorLoading:function(){return coleteOnlineLanguage.localitySearch.errorLoading},inputTooLong:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localitySearch.inputTooLong.replace("%d",e)},inputTooShort:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localitySearch.inputTooShort.replace("%d",e)},loadingMore:function(){return coleteOnlineLanguage.localitySearch.loadingMore},noResults:function(){return coleteOnlineLanguage.localitySearch.noResults},searching:function(){return coleteOnlineLanguage.localitySearch.searching},removeAllItems:function(){return coleteOnlineLanguage.localitySearch.removeAllItems},removeItem:function(){return coleteOnlineLanguage.localitySearch.removeItem},search:function(){return coleteOnlineLanguage.localitySearch.search}},width:"100%",minimumInputLength:"B"===s("#".concat(r,"_state")).val()?0:2,selectOnClose:"yes"===coleteOnlineOptions.autoSelectCity,templateSelection:function(e){return""===e.id?""===s("#".concat(r,"_state")).val()?shippingCityTranslations.emptyState:shippingCityTranslations.nonEmptyState:e.text}},s("#".concat(r,"_locality")).select2(n),""===s("#".concat(r,"_state")).val()&&s("#".concat(r,"_locality")).attr("disabled","disabled"),setTimeout(function(){s("#".concat(r,"_state")).on("select2:select",function(){s("#".concat(r,"_locality")).val(null).trigger("change"),s("#".concat(r,"_street")).val(null).trigger("change"),s("#".concat(r,"_city")).val(null).trigger("change"),""===s("#".concat(r,"_state")).val()?s("#".concat(r,"_locality")).attr("disabled","disabled"):s("#".concat(r,"_locality")).removeAttr("disabled"),s("#".concat(r,"_locality")).trigger("change"),"B"===s("#".concat(r,"_state")).val()?s("#".concat(r,"_locality")).select2(_objectSpread(_objectSpread({},n),{},{minimumInputLength:0})):s("#".concat(r,"_locality")).select2(_objectSpread(_objectSpread({},n),{},{minimumInputLength:2}))}),s("#".concat(r,"_locality")).on("select2:select",function(e){var t;"B"===s("#".concat(r,"_state")).val()?s("#".concat(r,"_city")).val(null===(t=e.params)||void 0===t?void 0:t.data.countyCode):s("#".concat(r,"_city")).val(null===(e=e.params)||void 0===e?void 0:e.data.cityName),s("#".concat(r,"_street")).val(null).trigger("change"),a(r)})},500)):(s("#".concat(r,"_city_state")).select2({ajax:{url:l,dataType:"json",delay:300,data:function(e){return{action:"coleteonline_autocomplete_city_state_merged",country:s("#".concat(r,"_country")).val(),q:e.term,page:null!==(e=e.page)&&void 0!==e?e:1}},processResults:function(e,t){if(!0===e.error)return s("#".concat(r,"_state")).val("B"),s("#".concat(r,"_city")).val(t.term),s("body").trigger("update_checkout"),{results:[{text:t.term,id:t.term}],pagination:{more:!1}};for(var n=[],a=function(e){var t="".concat(e.city,", ").concat(e.county);return{text:t,id:t,countyCode:e.countyCode,cityName:e.city,countyName:e.county}},c=0;c<e.data.length;++c){var o=e.data[c];o.list?n.push({text:o.upLocality+":",children:o.list.map(a)}):n.push(a(o))}t=e.pagination;return{results:n,pagination:{more:t.currentPage<t.totalPages}}}},language:{errorLoading:function(){return coleteOnlineLanguage.localityAndStateSearch.errorLoading},inputTooLong:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localityAndStateSearch.inputTooLong.replace("%d",e)},inputTooShort:function(e){e=e.minimum-e.input.length;return coleteOnlineLanguage.localityAndStateSearch.inputTooShort.replace("%d",e)},loadingMore:function(){return coleteOnlineLanguage.localityAndStateSearch.loadingMore},noResults:function(){return coleteOnlineLanguage.localityAndStateSearch.noResults},searching:function(){return coleteOnlineLanguage.localityAndStateSearch.searching},removeAllItems:function(){return coleteOnlineLanguage.localityAndStateSearch.removeAllItems},removeItem:function(){return coleteOnlineLanguage.localityAndStateSearch.removeItem},search:function(){return coleteOnlineLanguage.localityAndStateSearch.search}},width:"100%",minimumInputLength:2,selectOnClose:"yes"===coleteOnlineOptions.autoSelectCity}),s("#".concat(r,"_city_state")).on("select2:select",function(e){var t;u(e.params.data.countyCode)&&(t=e.params.data.countyCode,e.params.data.countyCode="B",e.params.data.cityName=t),s("#".concat(r,"_state")).val(null===(t=e.params)||void 0===t?void 0:t.data.countyCode),s("#".concat(r,"_city")).val(null===(t=e.params)||void 0===t?void 0:t.data.cityName),!1!==e.params.data.trigger&&(s("#".concat(r,"_street")).val(null).trigger("change"),s("#".concat(r,"_address_1")).val(""),a(r)),s("body").trigger("update_checkout")})))}}coleteOnlineOptions.validatePhone&&(s("#billing_phone").change(function(){t("billing")}),t("billing")),s("#billing_country").change(function(){n("billing",s("#billing_country").val())}),n("billing",s("#billing_country").val()),s("form.checkout").on("change",'input[name="payment_method"]',function(){s(document.body).trigger("update_checkout")}),s("form.checkout").on("change",'input[name="open_package"]',function(){s(document.body).trigger("update_checkout")}),s("#ship-to-different-address-checkbox").change(function(e){s("#ship-to-different-address-checkbox").val()&&n("shipping",s("#shipping_country").val())}),n("shipping",s("#shipping_country").val()),s("#shipping_country").change(function(){n("shipping",s("#shipping_country").val())})});